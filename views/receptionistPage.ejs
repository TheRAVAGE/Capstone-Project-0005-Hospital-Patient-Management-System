<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Login</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="styles/style.css" />

    <%- include("partials/header_loggedIn.ejs")%>
  </head>
  <body>
    <section id="table" style="padding-bottom: 5rem; padding-top: 5rem">
      <div
        class="container rounded p-3 tableContainer"
        style="background-color: azure"
      >
        <div class="row m-2 px-0" style="text-align: right">
          <a href="/formCreate" style="width: 100%">
            <button
              class="btn btn-outline-dark rounded-pill px-3"
              style="width: 100%"
            >
              +
            </button>
          </a>
        </div>
        <table>
          <tr>
            <th>Identity Number</th>
            <th>First Name</th>
            <th>Last Name</th>
            <th>Date of Registeration</th>
            <th>View</th>
            <th>Delete</th>
          </tr>

          <% for (let i=0; i < details.length; i++) { %>
          <tr>
            <td><%= details[i].id %></td>
            <td><%= details[i].fname %></td>
            <td><%= details[i].lname %></td>
            <td><%= details[i].dateofregisteration %></td>
            <td>
              <form action="/viewdetails" method="GET">
                <button
                  class="btn btn-info rounded-pill px-3"
                  style="width: 5rem"
                >
                  <input
                    name="patient_id"
                    value="<%= details[i].id %>"
                    hidden
                  />
                  View
                </button>
              </form>
            </td>
            <td>
              <form action="/deleteForm" method="POST">
                <button class="btn btn-outline-danger rounded-circle px-3">
                  X
                </button>
              </form>
            </td>
          </tr>
          <% } %>
        </table>
      </div>
    </section>
    <%- include("partials/footer.ejs")%>
  </body>
</html>
